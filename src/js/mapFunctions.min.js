import L from"leaflet";import _ from"lodash";var basemaps={OpenStreetMap_Mapnik:L.tileLayer("https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png",{maxZoom:19,attribution:'&copy; <a href="https://www.openstreetmap.org/copyright">OpenStreetMap</a> contributors'}),OpenStreetMap_HOT:L.tileLayer("https://{s}.tile.openstreetmap.fr/hot/{z}/{x}/{y}.png",{maxZoom:19,attribution:'&copy; <a href="https://www.openstreetmap.org/copyright">OpenStreetMap</a> contributors, Tiles style by <a href="https://www.hotosm.org/" target="_blank">Humanitarian OpenStreetMap Team</a> hosted by <a href="https://openstreetmap.fr/" target="_blank">OpenStreetMap France</a>'}),Stamen_TonerLite:L.tileLayer("https://stamen-tiles-{s}.a.ssl.fastly.net/toner-lite/{z}/{x}/{y}{r}.{ext}",{attribution:'Map tiles by <a href="http://stamen.com">Stamen Design</a>, <a href="http://creativecommons.org/licenses/by/3.0">CC BY 3.0</a> &mdash; Map data &copy; <a href="https://www.openstreetmap.org/copyright">OpenStreetMap</a> contributors',subdomains:"abcd",minZoom:0,maxZoom:20,ext:"png"})},layerSelector=(layers,leafletMap)=>{var baseMaps={"OSM Mapnik":basemaps.OpenStreetMap_Mapnik,"OSM Hot":basemaps.OpenStreetMap_HOT,"Stamen TonerLite":basemaps.Stamen_TonerLite};L.control.layers(baseMaps,layers).addTo(leafletMap)},classes=[{range:[0,60],color:"rgb(255, 255, 212)"},{range:[60,85],color:"rgb(254, 217, 142)"},{range:[85,100],color:"rgb(254, 153, 41)"},{range:[100,120],color:"rgb(217, 95, 14)"},{range:[120,1/0],color:"rgb(153, 52, 4)"}];function getColor(value,themeClasses){var color;if(!1===value)return"rgb(0, 0, 0)";var val=_.toNumber(value);return _.each(themeClasses,(function(v){if(!0===_.inRange(val,v.range[0],v.range[1]))return color=v.color,!1})),color}function getClasses(legend){return legend.items.map(v=>({range:[v.startValue,v.endValue],color:v.color}))}var setLayerStyle=(layer,opacity,legend,selectedArea)=>({do:function(data){var dataRef=_.keyBy(data.rows,(function(o){return o[1]}));layer.setStyle((function(feature){var value,color=getColor(!!dataRef[feature.id]&&dataRef[feature.id][2],getClasses(legend));return{fill:!0,fillOpacity:opacity,fillColor:color,color:feature.id===selectedArea?"rgb(29,75,244)":"rgb(50,50,50)",weight:feature.id===selectedArea?2.8:.6}})),layer.eachLayer(l=>{l.feature.id===selectedArea&&l.bringToFront(),l.on({mouseover:function(e){l.unbindTooltip(),l.bindTooltip(`${l.feature.properties.name} (${!!dataRef[l.feature.id]&&dataRef[l.feature.id][2]})`,{sticky:!0,permanent:!1}),l.openTooltip(),l.bringToFront(),l.setStyle({weight:3})},mouseout:function(e){l.closeTooltip(),l.unbindTooltip(),l.setStyle({weight:l.feature.id===selectedArea?2.8:.6})}})})}});export{basemaps,layerSelector,setLayerStyle};